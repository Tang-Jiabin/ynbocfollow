<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>我的奖品</title>
<link type="text/css" rel="stylesheet" href="css/css.css" />
<meta name="viewport" content="width=device-width initial-scale=1.0 maximum-scale=1.0 user-scalable=yes" />
<script type="text/javascript" src="js/jquery-1.10.2.js"></script>
</head>

<body>
<div class="back2"><a href="#"><img src="images/back2.png" /></a></div>
<!--wode-->
<div class="wode"><img src="images/wode.png"></div>
<!--wode--> 

<!--xiangqing-->
<div class="xiangqing">
  <div class="quanma">
    <div class="quanma_l"><img src="images/jiangpin2.png"></div>
    <div class="quanma_r"><span>已发放</span>
      <p><strong>10元美团外卖代金券</strong></p>
      <p>时间：2019-11-15     16:35:02</p>
   
      <section class="copy-demo">券码：<span class="pp"><strong class="copy-pp">XJDLAJG1</strong></span>
        <button type="button" class="copy-btn js-copy-btn" style=" right:0; top:3px; background-color:#da2128; color:#fff; border:none;">复制</button>
      </section>
    </div>
    <div class=" clear"></div>
  </div>
  <div class="xiangqing_t">领奖方法 </div>
  <div class="xiangqing_c" >
    <p>1、该券限在“美团外卖”手机客户端中的“我的”-“红包”点击“兑换”，输入优惠券密码兑换到卡包中，请在有效期前兑换，兑换后使用有效期31天。
 <p>2、下单后在“美团红包”中选择，即可抵扣相应金额。
 <p>3、一个订单仅限使用一张优惠码，优惠码不找零、不兑换，不得转售，逾期作废。
 <p>4、成功下单后优惠码即作废，申请退款后无法退还。
 <p>5、单次活动中每个用户仅可使用5次，同一美团账号、手机号、移动设备、银行卡、支付账号、身份证以及其他信息相同均视为同一用户。  </div>
</div>
<!--xiangqing-->
<script>
// JavaScript Document
 // 复制文案功能:
    const jsCopy = function(obj) {
        function fn() {
            var copyDOM = obj.parentNode.firstChild.nextElementSibling;
            const range = document.createRange();
            range.selectNode(copyDOM);

            const selection = window.getSelection();
            if(selection.rangeCount > 0) selection.removeAllRanges();
            selection.addRange(range);
            document.execCommand('Copy');
             try {
                    var msg = successful ? 'successful' : 'unsuccessful';
                    console.log('copy is' + msg);
                } catch(err) {
                    console.log(err);
                }
                // 移除选中的元素
                window.getSelection().removeAllRanges();
                obj.innerHTML = '已复制'
        //     var u = navigator.userAgent;
        //     //苹果
        //     if (u.match(/(iPhone|iPod|iPad);?/i)) {
        //         //要复制文字的节点
        //         var copyDOM = obj.parentNode.firstChild.nextElementSibling;
        //         var range = document.createRange();
        //         // 选中需要复制的节点
        //         range.selectNode(copyDOM);
        //         // 执行选中元素
        //         window.getSelection().addRange(range);
        //         // 执行 copy 操作
        //         var successful = document.execCommand('copy');
        //         try {
        //             var msg = successful ? 'successful' : 'unsuccessful';
        //             console.log('copy is' + msg);
        //         } catch(err) {
        //             console.log(err);
        //         }
        //         // 移除选中的元素
        //         window.getSelection().removeAllRanges();
        //         obj.innerHTML = '已复制'
        //     }
        //     // 安卓
        //     if(u.indexOf('Android') > -1 ){
        //         var $copyPP = obj.parentNode.firstChild.nextElementSibling,
        //         $copyText = obj.parentNode.lastChild.nextElementSibling;
        //         $copyText.innerHTML = $copyPP.innerHTML.replace(/<[^>]+>/g,"");
        //         $copyText.select(); // 选择对象
        //         document.execCommand("Copy"); // 执行浏览器复制命令
        //         obj.innerHTML = '已复制';
        //     }
        //     // 安卓系统的UC浏览器
        //     if(u.indexOf('Android') > -1 && u.indexOf('UCBrowser') > -1){
        //         obj.innerHTML = '点击复制文案';
        //         alert('若点击复制文案无效，请长按内容手动复制！');
        //     }
         }

        obj.addEventListener('click', fn, false);
    };

    //
    let copyBtns = document.querySelectorAll('.js-copy-btn');
    copyBtns.forEach((obj) => {
        jsCopy(obj);

    });</script>
</body>
</html>
